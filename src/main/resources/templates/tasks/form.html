<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="layout :: content">
<section>
  <h2 th:text="${taskDTO.id} == null ? 'Create Task' : 'Edit Task'">
    Task Form
  </h2>

  <form th:action="@{${taskDTO.id} == null ? '/tasks' : '/tasks/' + ${taskDTO.id}}"
        th:object="${taskDTO}"
        method="post" class="row g-3">

    <div class="col-md-6">
      <label class="form-label">Title</label>
      <input class="form-control" th:field="*{title}" />
      <div class="text-danger" th:if="${#fields.hasErrors('title')}"
           th:errors="*{title}"></div>
    </div>

    <div class="col-md-6">
      <label class="form-label">Due Date</label>
      <input type="date" class="form-control" th:field="*{dueDate}" />
      <div class="text-danger" th:if="${#fields.hasErrors('dueDate')}"
           th:errors="*{dueDate}"></div>
    </div>

    <div class="col-md-6">
      <label class="form-label">Category</label>
      <select class="form-select" th:field="*{categoryId}">
        <option th:each="cat : ${categories}"
                th:value="${cat.id}"
                th:text="${cat.name}">
        </option>
      </select>
    </div>

    <div class="col-md-6">
      <label class="form-label">Priority</label>
      <select class="form-select" th:field="*{priorityId}">
        <option th:each="pri : ${priorities}"
                th:value="${pri.id}"
                th:text="${pri.name}">
        </option>
      </select>
    </div>

    <div class="col-12">
      <div class="form-check">
        <input class="form-check-input" type="checkbox"
               th:field="*{completed}" />
        <label class="form-check-label">Completed</label>
      </div>
    </div>

    <div class="col-12">
      <button type="submit" class="btn btn-primary">
        Save
      </button>
      <a class="btn btn-secondary" th:href="@{/tasks}">
        Cancel
      </a>
    </div>
  </form>
</section>
</html>
